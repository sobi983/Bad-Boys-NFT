import "./global.css";
import "@rainbow-me/rainbowkit/styles.css";
import type { AppProps } from "next/app";
import {
	RainbowKitProvider,
	getDefaultWallets,
	connectorsForWallets,
	configureChains,
	apiProvider,
	wallet,
	darkTheme,
} from "@rainbow-me/rainbowkit";
import { chain, createClient, WagmiProvider } from "wagmi";

const { chains, provider, webSocketProvider } = configureChains(
	[
		chain.rinkeby,
		...(process.env.NEXT_PUBLIC_ENABLE_TESTNETS === "true"
			? [chain.rinkeby]
			: []),
	],
	[
		apiProvider.alchemy("_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC"),
		apiProvider.fallback(),
	]
);

const { wallets } = getDefaultWallets({
	appName: "RainbowKit Mint NFT Demo",
	chains,
});

const demoAppInfo = {
	appName: "RainbowKit Mint NFT Demo",
};

const connectors = connectorsForWallets([
	...wallets,
	{
		groupName: "Other",
		wallets: [wallet.argent({ chains }), wallet.trust({ chains })],
	},
]);

const wagmiClient = createClient({
	autoConnect: true,
	connectors,
	provider,
	webSocketProvider,
});

function MyApp({ Component, pageProps }: AppProps) {
	return (
		<WagmiProvider client={wagmiClient}>
			<RainbowKitProvider
				appInfo={demoAppInfo}
				chains={chains}
				theme={darkTheme({
					accentColor: "#112244",
					accentColorForeground: "white",
					borderRadius: "medium",
				})}
			>
				<Component {...pageProps} />
			</RainbowKitProvider>
		</WagmiProvider>
	);
}

export default MyApp;
